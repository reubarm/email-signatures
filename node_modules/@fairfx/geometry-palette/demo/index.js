import { nestedColorPalette } from '../build/lib/index';
import './styles.css';

window.addEventListener('load', () => {
  Window.colorPalette = nestedColorPalette;

  const colorKeys = Object.keys(nestedColorPalette);

  const buildColors = colorKeys.map((color) => {
    const className = `.${color}`;

    const styleSheet = nestedColorPalette[color]
      .map(
        (c, i) => `${className}-${i} { 
                background-color: ${c};
             }`
      )
      .join('');

    return styleSheet;
  });

  const style = document.createElement('style');

  style.innerHTML = buildColors.join('');

  document.head.appendChild(style);

  colorKeys.forEach((key, i) => {
    const el = document.querySelector(`.${key}`);

    if (el) {
      nestedColorPalette[key].forEach((col, i) => {
        const node = `<div class="color ${key}-${i}">
                    <p>${col}</p>
                </div>`;
        console.log(el);
        el.insertAdjacentHTML('beforeend', node);
      });
    }
  });
});
